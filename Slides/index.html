<!DOCTYPE html>
<html class="default-theme">
<head>
  <title>iOS App Groups for Debugging</title>
  <meta charset="utf-8">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <textarea id="source">
highlightStyle: dracula
class: inverse middle
# iOS App Groups for Debugging
## Avez-vous dÃ©jÃ  livrÃ© votre menu debug en Prod ? Nous oui, et nous avons trouvÃ© une solution originale basÃ©e sur les App Groups pour que cela nâ€™arrive plus jamais.

---

class: middle
# Agenda

1. Notre Menu Debug
2. Les App Groups, quâ€™est-ce que c'est ?
3. DÃ©mo : Notre nouveau menu Debug
4. Configurer votre projet
5. Utiliser les App Groups programmatiquement
6. Questions

---

# Menu Debug : Chez Meetic

Son but : Modifier le comportement de lâ€™application une fois compilÃ©

--

Comment : DÃ©veloppement dâ€™un `ViewController`.

--

CachÃ© par une gesture : â€œShakeâ€, â€œThree fingers swipe upâ€

--

Inclus lors de la compilation en scheme DEBUG avec le binaire de notre application

---

# Menu Debug: Son historique chez Meetic

<img src="img/historic.png" width="90%"></img>

---

# App Groups: Quâ€™est ce que câ€™est ?

>â€œApp Groups are the scheme iOS uses to allow different apps to share data. If the apps have the right entitlements and proper provisioning, they can access a shared directory outside of their normal iOS sandbox. Sandboxing still applies except for a single exception.â€

.footnote[Source: http://www.atomicbird.com/blog/sharing-with-app-extensions]

---

# App Groups: Comment partager des donnÃ©es ?

Partager des donnÃ©es entre applications du mÃªme `App Group` en utilisant :
- Keychain
- PrÃ©fÃ©rences: `UserDefaults`
- Fichiers: `FileManager`
- HTTPCookies: `HTTPCookieStorage`

---

# App Groups: Chez Meetic

## Pour nos utilisateurs

Partager le Keychain aux extensions

--

## Pour les dÃ©veloppeurs

- Pour nos dÃ©veloppeurs back-end, tester que leurs changements ne vont pas casser lâ€™application en production
- Changement dâ€™URL serveur
- Feature Flipping
- Logging
- Langue de lâ€™application sans changer la langue du tÃ©lÃ©phone via `AppleLanguages`
- RÃ©cupÃ©rer le push token
- Supprimer le cache
- â€¦

---

class: inverse center middle
# DÃ©mo

---

# Que faire dâ€™autre ?

- RÃ©cupÃ©rer un user id, le numÃ©ro de version
- Changer des `UserDefaults` spÃ©cifiques
- Ouvrir lâ€™application principale via `DeepLink`

---

class: inverse center middle
# Configurer votre projet

---

class: middle
# Enregister un App Group 1/2

<img src="img/register1.png" width="90%"></img>

---

class: middle
# Enregister un App Group 2/2

<img src="img/register2.png" width="90%"></img>

---

class: middle
# Ajouter aux Entitlements 1/3

<img src="img/entitlements1.png" width="90%"></img>

---

class: middle
# Ajouter aux Entitlements 2/3

<img src="img/entitlements2.png" width="90%"></img>

---

class: middle
# Ajouter aux Entitlements 3/3

<img src="img/capabilities.png" width="90%"></img>

---

class: middle inverse center
# âœ… PrÃªt Ã  utiliser

---

class: middle
# Utiliser - UserDefaults

```Swift
let userDefaults = UserDefaults(suiteName: "group.com.meetic.ios.cocoaheads")
userDefaults?.bool(forKey: "SharedKey")
```

---

class: middle
# Utiliser - FileManager

```Swift
let fileManager = FileManager.default
let containerURL = fileManager.containerURL(
	forSecurityApplicationGroupIdentifier: "group.com.meetic.ios.cocoaheads"
)
```

---

class: middle
# âš ï¸ Important Ã  savoir

Le conteneur partagÃ© nâ€™est pas supprimÃ© si il reste encore une application installÃ©e appartenant Ã  lâ€™App Group

Les applications doivent Ãªtre signÃ©es avec le mÃªme certificat

---

# DÃ©ploiement

- 20 utilisateurs et moins

--

	- Beta Testflight privÃ©e âœ…

--

- 20 utilisateurs et plus

--

	- Beta Testflight privÃ©e âŒ

--

	- Autre plateforme de dÃ©ploiement (HockeyApp) âœ…

--

	- Beta Testflight externe âš ï¸ ğŸ”¥

---

class: inverse middle center
# Questions

---

class: middle
# Projet dâ€™exemple & Slides

https://github.com/Valgrin/AppGroups

<img src="img/qrcode.jpg"></img>

  </textarea>
  <script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
  <script>
      var slideshow = remark.create({
        highlightLanguage: 'swift',
        highlightStyle: 'monokai',
      });
  </script>
</body>
</html>